<!DOCTYPE html>
<html>
<head>
    <title>College Admission Chatbot</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h2>College Admission Chatbot</h2>
        <div class="chat-box" id="chat-box"></div>
        <button onclick="startListening()">Speak</button>
        <button onclick="submitForm()">Submit Form</button>
    </div>

    <script>
        let fields = ["name", "dob", "email", "phone", "department"];
        let fieldQuestions = {
            name: "Hello! Welcome to the college admission form. What is your full name?",
            dob: "Great! What is your date of birth?",
            email: "Thanks! What is your email address?",
            phone: "Please tell me your phone number.",
            department: "Which department do you wish to apply for?"
        };

        let formData = {};
        let currentFieldIndex = 0;

        function addChat(text, sender) {
            let chat = document.createElement("div");
            chat.className = sender;
            chat.innerText = text;
            document.getElementById("chat-box").appendChild(chat);
        }

        function startListening() {
            let recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = "en-US";
            recognition.interimResults = false;

            if (currentFieldIndex < fields.length) {
                let field = fields[currentFieldIndex];
                addChat(fieldQuestions[field], "bot");

                recognition.start();

                recognition.onresult = function (event) {
                    let speech = event.results[0][0].transcript;
                    addChat(speech, "user");
                    formData[field] = speech;
                    currentFieldIndex++;
                    if (currentFieldIndex < fields.length) {
                        setTimeout(() => startListening(), 1500);
                    } else {
                        addChat("All details collected. Please click Submit.", "bot");
                    }
                };

                recognition.onerror = function () {
                    addChat("I didn't catch that. Please try again.", "bot");
                };
            }
        }

        function submitForm() {
            fetch("/submit_form", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify(formData)
            })
            .then(res => res.json())
            .then(data => addChat(data.message, "bot"));
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>College Theme Party Ideas</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-image: url('a72b6db9-7c30-49f5-8f56-f5c3376ab1f9.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100vh;
      font-family: Arial, sans-serif;
      color: white;
      text-align: center;
    }
    .overlay {
      background-color: rgba(0, 0, 0, 0.4);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    h1 {
      font-size: 2.5rem;
    }
  </style>
</head>
<body>
  <div class="overlay">
    <h1>The All-Time Best College Theme Party Ideas</h1>
  </div>
</body>
</html>
